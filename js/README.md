# Javascript å­¦ä¹ ç¬”è®°

> ä¸»è¦å­¦ä¹ èµ„æ–™ï¼š[ã€Šç½‘é“ï¼šjavascript æ•™ç¨‹ã€‹](https://wangdoc.com/javascript/)

## ç¬¬ä¸€æ­¥

æ‰“å¼€è°·æ­Œæµè§ˆå™¨ï¼ŒæŒ‰ä¸‹ `Option + Command + J`ï¼ˆMacï¼‰æˆ–è€… `Ctrl + Shift + J`ï¼ˆWindows / Linuxï¼‰è¿›å…¥æ§åˆ¶å°ã€‚

`Enter` è¿è¡Œä»£ç ï¼›`Shift + Enter` æ¢è¡Œã€‚

## js åŸºæœ¬è¯­æ³•

```js
var a = 1;
var b;
b = "abc";

// åˆæ³•æ ‡å¿—ç¬¦
arg0
_tmp
$elem

// æ³¨é‡Š
// è¡Œæ³¨é‡Š
/*
å—æ³¨é‡Š
*/

// ä»£ç å—
{

}

//  if
if (a == 1) {
  console.log("a == 1");
} else {
  console.log("a != 1");
}

// switch
switch (a) {
  case 1:
    // ...
    break;
  case 2:
    // ...
    break;
  default:
    // ...
}

// ä¸‰å…ƒè¿ç®—ç¬¦
var even = (n % 2 === 0) ? true : false;

// å¾ªç¯
while (a > 0) {
  // ...
}

var x = 3;
for (var i = 0; i < x; i++) {
  console.log(i)
}

do
  // ...
while (true);

// break and continue

// label
foo: {
  console.log(1);
  break foo;
  console.log(2);
}
console.log(3)
```

## æ•°æ®ç±»å‹

### ç®€ä»‹

- æ•°å€¼ number
- å­—ç¬¦ä¸² string
- å¸ƒå°”å€¼ boolean
- æœªå®šä¹‰ undefined
- ç©ºå€¼ null
- å¯¹è±¡ objectï¼ˆå€¼çš„é›†åˆï¼‰

å‰ä¸‰è€…åˆç§°ä¸ºåŸå§‹ç±»å‹ï¼Œä¸èƒ½å†ç»†åˆ†ã€‚å¯¹è±¡æˆä¸ºåˆæˆç±»å‹ï¼Œæ˜¯åŸºäºåŸå§‹ç±»å‹æ„å»ºçš„ã€‚æœªå®šä¹‰ä¸ç©ºå€¼ä¸€èˆ¬çœ‹ä½œä¸¤ä¸ªç‰¹æ®Šå€¼ã€‚

å¯¹è±¡ä¸€èˆ¬å¯ä»¥åˆ†ä¸º 3 ä¸ªå­ç±»å‹ï¼š

- ç‹­ä¹‰çš„å¯¹è±¡
- æ•°ç»„
- å‡½æ•°

JS æœ‰ 3 ç§æ–¹æ³•ç¡®å®šå€¼çš„ç±»å‹ï¼š

- `typeof` - è¿ç®—ç¬¦
- `instanceof` - è¿ç®—ç¬¦
- `Object.prototype.toString` - æ–¹æ³•

```js
> typeof 123
'number'
> typeof "123"
'string'
> typeof false
'boolean'
> typeof function f() {}
'function'
> typeof undefined
'undefined'
> typeof v
'undefined'
> typeof null // å†å²åŸå› é€ æˆçš„
'object'
> typeof {}
'object'
> typeof []
'object'

> var o = {}
undefined
> var a = []
undefined
> o instanceof Array
false
> a instanceof Array
true
```


null, undefined å’Œå¸ƒå°”å€¼ è¯¦è§£ï¼š<https://wangdoc.com/javascript/types/null-undefined-boolean.html>.

### æ•°å€¼

è½¬æ¢å’Œæµ‹è¯•æ–¹æ³•ã€‚

```js
parseInt()
parseFloat()
isNaN()
isFinite()
```

### å­—ç¬¦ä¸²

å•åŒå¼•å·ç­‰åŒã€‚

> ç”±äº HTML è¯­è¨€çš„å±æ€§å€¼ä½¿ç”¨åŒå¼•å·ï¼Œæ‰€ä»¥å¾ˆå¤šé¡¹ç›®çº¦å®š JavaScript è¯­è¨€çš„å­—ç¬¦ä¸²åªä½¿ç”¨å•å¼•å·ï¼Œæœ¬æ•™ç¨‹éµå®ˆè¿™ä¸ªçº¦å®šã€‚å½“ç„¶ï¼Œåªä½¿ç”¨åŒå¼•å·ä¹Ÿå®Œå…¨å¯ä»¥ã€‚é‡è¦çš„æ˜¯åšæŒä½¿ç”¨ä¸€ç§é£æ ¼ï¼Œä¸è¦ä¸€ä¼šä½¿ç”¨å•å¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œä¸€ä¼šåˆä½¿ç”¨åŒå¼•å·è¡¨ç¤ºã€‚

è¿æ¥è¿ç®—ç¬¦ï¼ˆ+ï¼‰å¯ä»¥è¿æ¥å¤šä¸ªå•è¡Œå­—ç¬¦ä¸²ã€‚

å­—ç¬¦ä¸²å¯ä»¥è¢«è§†ä¸ºå­—ç¬¦æ•°ç»„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ–¹æ‹¬å·è¿ç®—ç¬¦ï¼Œç”¨æ¥è¿”å›æŸä¸ªä½ç½®çš„å­—ç¬¦ï¼ˆä½ç½®ç¼–å·ä»0å¼€å§‹ï¼‰ã€‚

å¦‚æœæ–¹æ‹¬å·ä¸­çš„æ•°å­—è¶…è¿‡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæˆ–è€…æ–¹æ‹¬å·ä¸­æ ¹æœ¬ä¸æ˜¯æ•°å­—ï¼Œåˆ™è¿”å› undefinedã€‚

```js
> var s = 'hello';
undefined
> s[0]
'h'
> s[1]
'e'
> 
> s[-1]
undefined
> s.length
5
> 'ğŒ†'.length
2
```

ä¸Šé¢ä»£ç ä¸­ï¼ŒJavaScript è®¤ä¸ºğŒ†çš„é•¿åº¦ä¸º 2ï¼Œè€Œä¸æ˜¯ 1ã€‚

Base64 å°±æ˜¯ä¸€ç§ç¼–ç æ–¹æ³•ï¼Œå¯ä»¥å°†ä»»æ„å€¼è½¬æˆ 0ï½9ã€Aï½Zã€a-zã€+å’Œ/è¿™64ä¸ªå­—ç¬¦ç»„æˆçš„å¯æ‰“å°å­—ç¬¦ã€‚ä½¿ç”¨å®ƒçš„ä¸»è¦ç›®çš„ï¼Œä¸æ˜¯ä¸ºäº†åŠ å¯†ï¼Œè€Œæ˜¯ä¸ºäº†ä¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ï¼Œç®€åŒ–ç¨‹åºçš„å¤„ç†ã€‚

JavaScript åŸç”Ÿæä¾›ä¸¤ä¸ª Base64 ç›¸å…³çš„æ–¹æ³•ã€‚

- `btoa()`ï¼šä»»æ„å€¼è½¬ä¸º Base64 ç¼–ç 
- `atob()`ï¼šBase64 ç¼–ç è½¬ä¸ºåŸæ¥çš„å€¼

```js
// æ— æ³•åœ¨ node ä¸­ç›´æ¥ä½¿ç”¨
var string = 'Hello World!';
btoa(string) // "SGVsbG8gV29ybGQh"
atob('SGVsbG8gV29ybGQh') // "Hello World!"
```

### å¯¹è±¡

js ä¸­å¯¹è±¡å°±æ˜¯ä¸€ç»„â€œé”®å€¼å¯¹â€ï¼ˆkey-valueï¼‰çš„é›†åˆï¼Œæ˜¯ä¸€ç§æ— åºçš„å¤åˆæ•°æ®é›†åˆã€‚

åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè¿™ç§å¯¹è±¡æ¦‚å¿µå¸¸è¢«ç§°ä¸ºå­—å…¸ã€‚

å¯¹è±¡çš„æ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼ˆES6 åˆå¼•å…¥äº† Symbol å€¼ä¹Ÿå¯ä»¥ä½œä¸ºé”®åï¼‰ï¼Œæ‰€ä»¥åŠ ä¸åŠ å¼•å·éƒ½å¯ä»¥ã€‚

```js
> var obj1 = {a:1, b:2}
undefined
> obj1
{ a: 1, b: 2 }
> var obj2 = {'a':1, 'b':2}
undefined
> obj2
{ a: 1, b: 2 }
```

**å¯¹è±¡çš„æ¯ä¸€ä¸ªé”®ååˆç§°ä¸ºâ€œå±æ€§â€ï¼ˆpropertyï¼‰ï¼Œå®ƒçš„â€œé”®å€¼â€å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ã€‚å¦‚æœä¸€ä¸ªå±æ€§çš„å€¼ä¸ºå‡½æ•°ï¼Œé€šå¸¸æŠŠè¿™ä¸ªå±æ€§ç§°ä¸ºâ€œæ–¹æ³•â€ï¼Œå®ƒå¯ä»¥åƒå‡½æ•°é‚£æ ·è°ƒç”¨ã€‚**

```js
> var obj = {
... printHello: function(x) {
..... console.log("Hello" + x)
..... }
... }
undefined
> obj.printHello('world')
Helloworld
```

å¦‚æœä¸åŒçš„å˜é‡åæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œä¼šå½±å“åˆ°å…¶ä»–æ‰€æœ‰å˜é‡ã€‚

ä½†æ˜¯ï¼Œè¿™ç§å¼•ç”¨åªå±€é™äºå¯¹è±¡ï¼Œå¦‚æœä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ã€‚é‚£ä¹ˆï¼Œå˜é‡è¿™æ—¶éƒ½æ˜¯å€¼çš„æ‹·è´ã€‚

è¯»å–å¯¹è±¡çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ä½¿ç”¨æ–¹æ‹¬å·è¿ç®—ç¬¦ã€‚

```js
> obj1.a
1
> obj1['a']
1
```

æŸ¥çœ‹å±æ€§ï¼š

```js
> Object.keys(obj1)
[ 'a', 'b' ]
```

åˆ é™¤ï¼š

```js
> delete obj1.a
true
> obj1
{ b: 2 }
```

æ³¨æ„ï¼Œåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ï¼Œdelete ä¸æŠ¥é”™ï¼Œè€Œä¸”è¿”å› trueã€‚

ç”¨ `in` è¿ç®—ç¬¦åˆ¤æ–­å±æ€§å­˜åœ¨ï¼š

```js
> 'a' in obj1
false
> 'b' in obj1
true
```

`in` è¿ç®—ç¬¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå®ƒä¸èƒ½è¯†åˆ«å“ªäº›å±æ€§æ˜¯å¯¹è±¡è‡ªèº«çš„ï¼Œå“ªäº›å±æ€§æ˜¯ç»§æ‰¿çš„ã€‚
è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ `hasOwnProperty` æ–¹æ³•ã€‚

```js
> 'toString' in obj1
true
> obj1.hasOwnProperty('toString')
false
```

`for...in` å¾ªç¯ç”¨æ¥éå†ä¸€ä¸ªå¯¹è±¡çš„å…¨éƒ¨å±æ€§ã€‚

```js
> var obj = {a: 1, b:2, c:3};
undefined
> for (var i in obj) {
... console.log('key: ', i);
... console.log('value: ', obj[i]);
... }
key:  a
value:  1
key:  b
value:  2
key:  c
value:  3
```

å®ƒéå†çš„æ˜¯å¯¹è±¡æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰çš„å±æ€§ï¼ˆåŒ…æ‹¬ç»§æ‰¿çš„ï¼‰ï¼Œä¼šè·³è¿‡ä¸å¯éå†çš„å±æ€§ã€‚

`with` è¯­å¥æä¾›äº†ä¿®æ”¹å¯¹è±¡çš„æ–¹ä¾¿æ“ä½œï¼Œç±»ä¼¼äº R ä¸­çš„ `with`ã€‚

```js
var obj = {
  p1: 1,
  p2: 2,
};
with (obj) {
  p1 = 4;
  p2 = 5;
}
// ç­‰åŒäº
obj.p1 = 4;
obj.p2 = 5;
```

### å‡½æ•°

å‡½æ•°æ˜¯ä¸€æ®µå¯ä»¥åå¤è°ƒç”¨çš„ä»£ç å—ï¼Œæœ‰ä»¥ä¸‹ 3 ç§å£°æ˜æ–¹å¼ã€‚

- function å‘½ä»¤ã€‚

```js
function print(s) {
  consolo.log(s);
}
```

- å‡½æ•°è¡¨è¾¾å¼ï¼ˆæ³¨æ„ç»“å°¾å¤„çš„åˆ†å·ï¼‰

```js
var print = function(s) {
  console.log(a);
};
```

- Function æ„é€ å‡½æ•°ï¼ˆæœ€åä¸€ä¸ªå‚æ•°è¢«ä½œä¸ºå‡½æ•°ä½“ï¼‰

```js
var print = new Function(
  's',
  'console.log(s)'
);
```

JavaScript è¯­è¨€å°†å‡½æ•°çœ‹ä½œä¸€ç§å€¼ï¼Œä¸å…¶å®ƒå€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ç­‰ï¼‰åœ°ä½ç›¸åŒã€‚å‡¡æ˜¯å¯ä»¥ä½¿ç”¨å€¼çš„åœ°æ–¹ï¼Œå°±èƒ½ä½¿ç”¨å‡½æ•°ã€‚

å‡½æ•°æœ‰ä»¥ä¸‹ä¸€äº›å±æ€§ï¼š

- `name` - å‡½æ•°å
- `length` - å‡½æ•°é¢„æœŸä¼ å…¥å‚æ•°çš„ä¸ªæ•°
- `toString()` æ–¹æ³•è¿”å›å­—ç¬¦ä¸²æºç ï¼ˆåŒ…æ‹¬æ³¨é‡Šï¼‰

ä½œç”¨åŸŸï¼ˆscopeï¼‰æŒ‡çš„æ˜¯å˜é‡å­˜åœ¨çš„èŒƒå›´ã€‚ç›®å‰æ–°ç‰ˆ js æœ‰ 3 ç§ï¼š

- å…¨å±€ä½œç”¨åŸŸ
- å‡½æ•°ä½œç”¨åŸŸ
- å—çº§ä½œç”¨åŸŸï¼ˆES 6 æ–°å¢ï¼‰

æ³¨æ„ js ä¸­çš„**å˜é‡æå‡**ï¼Œå£°æ˜è¯­å¥åœ¨å®é™…è¿è¡Œæ—¶ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚

å‡½æ•°å‚æ•°ä¸æ˜¯å¿…éœ€çš„ï¼ŒJavaScript å…è®¸çœç•¥å‚æ•°ã€‚

çœç•¥çš„å‚æ•°çš„å€¼å°±å˜ä¸º `undefined`ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°çš„ `length` å±æ€§ä¸å®é™…ä¼ å…¥çš„å‚æ•°ä¸ªæ•°æ— å…³ï¼Œåªåæ˜ å‡½æ•°é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°ã€‚ä½†æ˜¯ï¼Œæ²¡æœ‰åŠæ³•åªçœç•¥é å‰çš„å‚æ•°ï¼Œè€Œä¿ç•™é åçš„å‚æ•°ã€‚å¦‚æœä¸€å®šè¦çœç•¥é å‰çš„å‚æ•°ï¼Œåªæœ‰æ˜¾å¼ä¼ å…¥ `undefined`ã€‚

```js
> function echo(a, b) {
... return a;
... }
undefined
> echo(1, 2, 3)
1
> echo(1)
1
> echo()
undefined
> echo(undefined, 1)
undefined
```

å¦‚æœæœ‰åŒåçš„å‚æ•°ï¼Œåˆ™å–æœ€åå‡ºç°çš„é‚£ä¸ªå€¼ã€‚

å‡½æ•°ä¼ å‚æ–¹å¼ï¼š

- å‡½æ•°å‚æ•°å¦‚æœæ˜¯åŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œä¼ é€’æ–¹å¼æ˜¯ä¼ å€¼ä¼ é€’ï¼ˆpasses by valueï¼‰ã€‚
- å¦‚æœå‡½æ•°å‚æ•°æ˜¯å¤åˆç±»å‹çš„å€¼ï¼ˆæ•°ç»„ã€å¯¹è±¡ã€å…¶ä»–å‡½æ•°ï¼‰ï¼Œä¼ é€’æ–¹å¼æ˜¯ä¼ å€ä¼ é€’ï¼ˆpass by referenceï¼‰ã€‚

`arguments` å¯¹è±¡ï¼šç”±äº JavaScript å…è®¸å‡½æ•°æœ‰ä¸å®šæ•°ç›®çš„å‚æ•°ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…éƒ¨è¯»å–æ‰€æœ‰å‚æ•°ã€‚è¿™å°±æ˜¯ `arguments` å¯¹è±¡çš„ç”±æ¥ã€‚

`arguments` å¯¹è±¡åŒ…å«äº†å‡½æ•°è¿è¡Œæ—¶çš„æ‰€æœ‰å‚æ•°ï¼Œ`arguments[0]` å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ`arguments[1]` å°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸ªå¯¹è±¡åªæœ‰åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚

```js
var f = function (one) {
  console.log(arguments[0]);
  console.log(arguments[1]);
  console.log(arguments[2]);
}

f(1, 2, 3)
// 1
// 2
// 3
```

æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œ`arguments å¯¹è±¡å¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹ã€‚

```js
var f = function(a, b) {
  arguments[0] = 3;
  arguments[1] = 2;
  return a + b;
}

f(1, 1) // 5
```

ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ`arguments` å¯¹è±¡ä¸å‡½æ•°å‚æ•°ä¸å…·æœ‰è”åŠ¨å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®æ”¹ `arguments` å¯¹è±¡ä¸ä¼šå½±å“åˆ°å®é™…çš„å‡½æ•°å‚æ•°ã€‚

```js
var f = function(a, b) {
  'use strict'; // å¼€å¯ä¸¥æ ¼æ¨¡å¼
  arguments[0] = 3;
  arguments[1] = 2;
  return a + b;
}

f(1, 1) // 2
```

é€šè¿‡ `arguments` å¯¹è±¡ `length` å±æ€§ï¼Œå¯ä»¥åˆ¤æ–­å‡½æ•°è°ƒç”¨æ—¶åˆ°åº•å¸¦å‡ ä¸ªå‚æ•°ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ `arguments` å¾ˆåƒæ•°ç»„ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

å¦‚æœè¦è®© `arguments` å¯¹è±¡ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼ŒçœŸæ­£çš„è§£å†³æ–¹æ³•æ˜¯å°† `arguments` è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ä¸‹é¢æ˜¯ä¸¤ç§å¸¸ç”¨çš„è½¬æ¢æ–¹æ³•ï¼š`slice` æ–¹æ³•å’Œé€ä¸€å¡«å…¥æ–°æ•°ç»„ã€‚

```js
var args = Array.prototype.slice.call(arguments);

// æˆ–è€…
var args = [];
for (var i = 0; i < arguments.length; i++) {
  args.push(arguments[i]);
}
```

`arguments` å¯¹è±¡å¸¦æœ‰ä¸€ä¸ª `callee` å±æ€§ï¼Œè¿”å›å®ƒæ‰€å¯¹åº”çš„åŸå‡½æ•°ã€‚

```js
var f = function () {
  console.log(arguments.callee === f);
}

f() // true
```

### å‡½æ•°é—­åŒ…

æ­£å¸¸æƒ…å†µä¸‹ï¼Œå‡½æ•°å¤–éƒ¨æ— æ³•è¯»å–å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡ã€‚

```js
function f1() {
  var n = 999;
}

console.log(n)
// Uncaught ReferenceError: n is not defined(
```

å¦‚æœå‡ºäºç§ç§åŸå› ï¼Œéœ€è¦å¾—åˆ°å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™æ˜¯åŠä¸åˆ°çš„ï¼Œåªæœ‰é€šè¿‡å˜é€šæ–¹æ³•æ‰èƒ½å®ç°ã€‚é‚£å°±æ˜¯åœ¨å‡½æ•°çš„å†…éƒ¨ï¼Œå†å®šä¹‰ä¸€ä¸ªå‡½æ•°ã€‚

```js
function f1() {
  var n = 999;
  function f2() {
ã€€ã€€console.log(n); // 999
  }
}
```

**ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•° `f2` å°±åœ¨å‡½æ•° `f1` å†…éƒ¨ï¼Œè¿™æ—¶ `f1` å†…éƒ¨çš„æ‰€æœ‰å±€éƒ¨å˜é‡ï¼Œå¯¹ `f2` éƒ½æ˜¯å¯è§çš„ã€‚ä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œï¼Œ`f2` å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯¹ `f1` å°±æ˜¯ä¸å¯è§çš„ã€‚**

é‚£ä¹ˆåªè¦æŠŠ `f2` ä½œä¸ºè¿”å›å€¼ï¼Œæˆ‘ä»¬ä¸å°±å¯ä»¥åœ¨ `f1` å¤–éƒ¨è¯»å–å®ƒçš„å†…éƒ¨å˜é‡äº†å—ï¼

```js
function f1() {
  var n = 999;
  function f2() {
    console.log(n);
  }
  return f2;
}

var result = f1();
result(); // 999
```

**é—­åŒ…å°±æ˜¯å‡½æ•° `f2`ï¼Œå³èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚ç”±äºåœ¨ JavaScript è¯­è¨€ä¸­ï¼Œåªæœ‰å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°æ‰èƒ½è¯»å–å†…éƒ¨å˜é‡ï¼Œå› æ­¤å¯ä»¥æŠŠé—­åŒ…ç®€å•ç†è§£æˆâ€œå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°â€ã€‚é—­åŒ…æœ€å¤§çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒå¯ä»¥â€œè®°ä½â€è¯ç”Ÿçš„ç¯å¢ƒï¼Œæ¯”å¦‚ `f2` è®°ä½äº†å®ƒè¯ç”Ÿçš„ç¯å¢ƒ `f1`ï¼Œæ‰€ä»¥ä» `f2` å¯ä»¥å¾—åˆ° `f1` çš„å†…éƒ¨å˜é‡ã€‚åœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ã€‚**

**é—­åŒ…çš„æœ€å¤§ç”¨å¤„æœ‰ä¸¤ä¸ª**

- ä¸€ä¸ªæ˜¯å¯ä»¥è¯»å–å¤–å±‚å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è®©è¿™äº›å˜é‡å§‹ç»ˆä¿æŒåœ¨å†…å­˜ä¸­ï¼Œå³é—­åŒ…å¯ä»¥ä½¿å¾—å®ƒè¯ç”Ÿç¯å¢ƒä¸€ç›´å­˜åœ¨ã€‚
- é—­åŒ…çš„å¦ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯å°è£…å¯¹è±¡çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ã€‚

```js
function createIncrementor(start) {
  return function () {
    return start++;
  };
}

var inc = createIncrementor(5);

inc() // 5
inc() // 6
inc() // 7
```

```js
function Person(name) {
  var _age;
  function setAge(n) {
    _age = n;
  }
  function getAge() {
    return _age;
  }

  return {
    name: name,
    getAge: getAge,
    setAge: setAge
  };
}

var p1 = Person('å¼ ä¸‰');
p1.setAge(25);
p1.getAge() // 25
```

æ³¨æ„ï¼Œå¤–å±‚å‡½æ•°æ¯æ¬¡è¿è¡Œï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„é—­åŒ…ï¼Œè€Œè¿™ä¸ªé—­åŒ…åˆä¼šä¿ç•™å¤–å±‚å‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œæ‰€ä»¥å†…å­˜æ¶ˆè€—å¾ˆå¤§ã€‚å› æ­¤ä¸èƒ½æ»¥ç”¨é—­åŒ…ï¼Œå¦åˆ™ä¼šé€ æˆç½‘é¡µçš„æ€§èƒ½é—®é¢˜ã€‚

### eval å‘½ä»¤

evalå‘½ä»¤æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†è¿™ä¸ªå­—ç¬¦ä¸²å½“ä½œè¯­å¥æ‰§è¡Œã€‚

```js
eval('var a = 1;');
a // 1
```

`eval` æ²¡æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œéƒ½åœ¨å½“å‰ä½œç”¨åŸŸå†…æ‰§è¡Œï¼Œå› æ­¤å¯èƒ½ä¼šä¿®æ”¹å½“å‰ä½œç”¨åŸŸçš„å˜é‡çš„å€¼ï¼Œé€ æˆå®‰å…¨é—®é¢˜ã€‚

ä¸ºäº†é˜²æ­¢è¿™ç§é£é™©ï¼ŒJavaScript è§„å®šï¼Œå¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œ`eval` å†…éƒ¨å£°æ˜çš„å˜é‡ï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨ä½œç”¨åŸŸã€‚

### æ•°ç»„

æ•°ç»„ï¼ˆarrayï¼‰æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ä¸€ç»„å€¼ã€‚



## electron ä½¿ç”¨

### åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹å¹¶å®‰è£… electron

```
mkdir my-electron-app && cd my-electron-app
npm init -y
npm i --save-dev electron
```

- <https://www.limitcode.com/detail/59a15b1a69e95702e0780249.html>
- <https://learnku.com/articles/15975/npm-accelerate-and-modify-mirror-source-in-china>

é…ç½®æ·˜å®é•œåƒï¼š

```
npm config set registry https://registry.npm.taobao.org
npm config set disturl https://npm.taobao.org/dist
npm config set electron_mirror https://npm.taobao.org/mirrors/electron/
```

### åº”ç”¨æ‰“åŒ…å’Œåˆ†å‘

```
# åº”ç”¨ Electron forge
npx @electron-forge/cli import
# åˆ›å»ºåˆ†å‘ç‰ˆæœ¬ï¼Œç»“æœåœ¨ out ç›®å½•ä¸‹
npm run make
```
